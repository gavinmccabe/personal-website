name: Deploy Site to AWS

on:
    push:
        branches: [main]
        
permissions:
    id-token: write
    contents: read

jobs:
    Upload-To-S3:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout Repository
              uses: actions/checkout@v4.1.7
            
            - name: Configure AWS Credentials
              uses: aws-actions/configure-aws-credentials@v4.0.2
              with:
                  aws-region: us-west-1
                  role-to-assume: arn:aws:iam::533267264662:role/PersonalSiteGithubActionsRole
                  
            - name: Upload to S3
              run: aws s3 cp . s3://gavinmccabe-personal-site/ --recursive --exclude ".*" --exclude "*/.*"

            
                  
                